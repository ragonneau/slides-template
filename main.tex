%% main.tex
%% Copyright 2023 Tom M. Ragonneau
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is Tom M. Ragonneau.
\documentclass[10pt]{beamer}
\usepackage{appendixnumberbeamer}

% Load theme
\usetheme{metropolis}
\metroset{
    titleformat=smallcaps,
    numbering=fraction,
    progressbar=frametitle,
    block=fill,
}

% Change theme colors
\definecolor{PolyURed}{RGB}{160,25,55}
\definecolor{PolyUGrey}{RGB}{88,89,91}
% \setbeamercolor{alerted text}{fg=PolyURed,bg=PolyUGrey}

% Patch `Overfull \vbox (13.79993pt too high)' in title page
\def\titlepage{\usebeamertemplate{title page}}

% Patch `Token not allowed in a PDF string (Unicode)' in appendix
\pdfstringdefDisableCommands{\def\translate#1{#1}}

% Font for mathematics
\usefonttheme{professionalfonts}

% Font for standout frames
\setbeamerfont{standout}{size=\normalsize}

% Support for license
\usepackage[
    type={CC},
    modifier={by-sa},
    version={4.0},
]{doclicense}
\usepackage{etoolbox}
\apptocmd{\doclicenseLongName}{license}{}{}

\title{Title of the course}
\subtitle{Subtitle of the course}
\date{\today}
\author{Tom M. Ragonneau}
\institute{
    Department of Applied Mathematics\\ 
    The Hong Kong Polytechnic University
}
% \titlegraphic{\hfill\includegraphics[height=1.5cm]{logo.pdf}}

\usepackage{trimspaces}
\makeatletter
\newread\giturlstream
\openin\giturlstream=|"./build_tools/giturl.sh"
\read\giturlstream to \giturl
\closein\giturlstream
\trim@spaces@in\giturl
\def\def@short@giturl#1://#2/\relax{\def\giturlshort{#2}}
\expandafter\def@short@giturl\giturl\relax
\makeatother

\begin{document}

\maketitle

\begin{frame}[standout]

    This work is licensed under a \doclicenseLongNameRef.
    \begin{center}
        \doclicenseImage[imagewidth=0.3\textwidth]
    \end{center}

    \bigskip

    The source code of this presentation is available at
    \begin{center}
        \normalfont\href{\giturl}{\texttt{\giturlshort}}.
    \end{center}

    It is based on the metropolis Beamer theme, available at
    \begin{center}
        \normalfont\href{https://github.com/matze/mtheme/}{\texttt{github.com/matze/mtheme}}.
    \end{center}
\end{frame}

\begin{frame}{Table of contents}
    \setbeamertemplate{section in toc}[sections numbered]
    \tableofcontents[hideallsubsections]
\end{frame}

\section{Introduction}

\begin{frame}{Introduction}

  This is an \alert{alerted text} and
  \begin{equation}
    x = \int_0^1 f(y) \, \mathrm{d}y
  \end{equation}
\end{frame}

\appendix

\end{document}
